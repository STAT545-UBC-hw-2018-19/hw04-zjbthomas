---
title: "STAT 545A Homework 4"
author: "Junbin ZHANG"
date: "Sept 25, 2018"
output:
  html_document:
    keep_md: true
    toc: true
---

# Bring rectangular data in

```r
## load gapminder
library(gapminder)
## load tidyverse
library(tidyverse)
```

```
## -- Attaching packages -------------------------------------------------------------------- tidyverse 1.2.1 --
```

```
## v ggplot2 3.0.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.6
## v tidyr   0.8.1     v stringr 1.3.1
## v readr   1.1.1     v forcats 0.3.0
```

```
## -- Conflicts ----------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
```

# Data Reshaping Prompts (and relationship to aggregation)

## Activity #1

**Make your own cheatsheet.**

In this section, we try to explore the following functions in `tidyr`:

- `gather()`: converts wide data to longer format.
- `spread()`: converts long data to wider format.
- `unite()`: combines two or more columns into a single column.
- `separate()`: splits one column into two or more columns.

We are going to use `mtcars` and `gapminder` as the databases.


```r
# show a preview of mtcars
head(mtcars) %>% 
  knitr::kable()
```

                      mpg   cyl   disp    hp   drat      wt    qsec   vs   am   gear   carb
------------------  -----  ----  -----  ----  -----  ------  ------  ---  ---  -----  -----
Mazda RX4            21.0     6    160   110   3.90   2.620   16.46    0    1      4      4
Mazda RX4 Wag        21.0     6    160   110   3.90   2.875   17.02    0    1      4      4
Datsun 710           22.8     4    108    93   3.85   2.320   18.61    1    1      4      1
Hornet 4 Drive       21.4     6    258   110   3.08   3.215   19.44    1    0      3      1
Hornet Sportabout    18.7     8    360   175   3.15   3.440   17.02    0    0      3      2
Valiant              18.1     6    225   105   2.76   3.460   20.22    1    0      3      1

We give the first column a name ("car") so it is better to manipulate. In fact, the first column in the above table is the `rownames()` of the table.


```r
# add a new column and assign rownames() to it
mtcars$car <- rownames(mtcars)
# reshape the data frame
mtcars_with_car <- mtcars[, c(12, 1:11)]
# show a preview of modified mtcars
head(mtcars_with_car) %>% 
  knitr::kable()
```

                    car                   mpg   cyl   disp    hp   drat      wt    qsec   vs   am   gear   carb
------------------  ------------------  -----  ----  -----  ----  -----  ------  ------  ---  ---  -----  -----
Mazda RX4           Mazda RX4            21.0     6    160   110   3.90   2.620   16.46    0    1      4      4
Mazda RX4 Wag       Mazda RX4 Wag        21.0     6    160   110   3.90   2.875   17.02    0    1      4      4
Datsun 710          Datsun 710           22.8     4    108    93   3.85   2.320   18.61    1    1      4      1
Hornet 4 Drive      Hornet 4 Drive       21.4     6    258   110   3.08   3.215   19.44    1    0      3      1
Hornet Sportabout   Hornet Sportabout    18.7     8    360   175   3.15   3.440   17.02    0    0      3      2
Valiant             Valiant              18.1     6    225   105   2.76   3.460   20.22    1    0      3      1


### `gather()`

#### Format of `gather()`

`gather(data, key, value, ..., na.rm = FALSE, convert = FALSE)`

Here `...` is the specification of the columns to gather.

#### Demos

`gather()` tries to create key-value pairs for a given data frame. In the first demos, we use `car` as the index, and different attribute as keys and show their corresponding values.


```r
gather_attributes <- mtcars_with_car %>% 
  # list all different attributes in column "attribute", use "car" as index (so it is not included in the reshape)
  gather(attribute, value, -car)

# show previews 
head(gather_attributes) %>% 
  knitr::kable()
```



car                 attribute    value
------------------  ----------  ------
Mazda RX4           mpg           21.0
Mazda RX4 Wag       mpg           21.0
Datsun 710          mpg           22.8
Hornet 4 Drive      mpg           21.4
Hornet Sportabout   mpg           18.7
Valiant             mpg           18.1

```r
tail(gather_attributes) %>% 
  knitr::kable()
```

      car              attribute    value
----  ---------------  ----------  ------
347   Porsche 914-2    carb             2
348   Lotus Europa     carb             2
349   Ford Pantera L   carb             4
350   Ferrari Dino     carb             6
351   Maserati Bora    carb             8
352   Volvo 142E       carb             2

We can also gather some columns instead of all.


```r
gather_some_attributes <- mtcars_with_car %>% 
  # gather only mpg to gear
  gather(attribute, value, mpg:gear)

# show previews
head(gather_some_attributes) %>% 
  knitr::kable()
```



car                  carb  attribute    value
------------------  -----  ----------  ------
Mazda RX4               4  mpg           21.0
Mazda RX4 Wag           4  mpg           21.0
Datsun 710              1  mpg           22.8
Hornet 4 Drive          1  mpg           21.4
Hornet Sportabout       2  mpg           18.7
Valiant                 1  mpg           18.1

```r
tail(gather_some_attributes) %>% 
  knitr::kable()
```

      car               carb  attribute    value
----  ---------------  -----  ----------  ------
315   Porsche 914-2        2  gear             5
316   Lotus Europa         2  gear             5
317   Ford Pantera L       4  gear             5
318   Ferrari Dino         6  gear             5
319   Maserati Bora        8  gear             5
320   Volvo 142E           2  gear             4

### `spread()`

#### Format of `spread()`

`spread(data, key, value, fill = NA, convert = FALSE, drop = TRUE)`

#### Demos

`spread()` can be considered as a reversed operation of `gather()`.


```r
# spread attribute and value
mtcars_spread <- gather_attributes %>% 
  spread(attribute, value)

# show a preview
head(mtcars_spread) %>% 
  knitr::kable()
```



car                   am   carb   cyl   disp   drat   gear    hp    mpg    qsec   vs      wt
-------------------  ---  -----  ----  -----  -----  -----  ----  -----  ------  ---  ------
AMC Javelin            0      2     8    304   3.15      3   150   15.2   17.30    0   3.435
Cadillac Fleetwood     0      4     8    472   2.93      3   205   10.4   17.98    0   5.250
Camaro Z28             0      4     8    350   3.73      3   245   13.3   15.41    0   3.840
Chrysler Imperial      0      4     8    440   3.23      3   230   14.7   17.42    0   5.345
Datsun 710             1      1     4    108   3.85      4    93   22.8   18.61    1   2.320
Dodge Challenger       0      2     8    318   2.76      3   150   15.5   16.87    0   3.520

### `unite()`

#### Format of `unite()`

`unite(data, col, ..., sep = "_", remove = TRUE)`

Here `...` represents the columns to unite and `col` represents the column to add.

#### Demos

In this demo, we try to unite `pop` and `gdpPercap` into the same column in `gapminder`. Notice it just shows the new column as a multiplication of `pop` and `gdpPercap`, but no calculation will be performed.


```r
# unite to have overall_gdp
unite_gdp <- gapminder %>% 
  unite(overall_gdp, pop, gdpPercap, sep = "*")

# show a preview
head(unite_gdp) %>% 
  knitr::kable()
```



country       continent    year   lifeExp  overall_gdp          
------------  ----------  -----  --------  ---------------------
Afghanistan   Asia         1952    28.801  8425333*779.4453145  
Afghanistan   Asia         1957    30.332  9240934*820.8530296  
Afghanistan   Asia         1962    31.997  10267083*853.10071   
Afghanistan   Asia         1967    34.020  11537966*836.1971382 
Afghanistan   Asia         1972    36.088  13079460*739.9811058 
Afghanistan   Asia         1977    38.438  14880372*786.11336   


### `separate()`

#### Format of `separate()`

`separate(data, col, into, sep = "[^[:alnum:]]+", remove = TRUE, convert = FALSE, extra = "warn", fill = "warn", ...)`

#### Demos

`separate()` can be considered as a reversed operation of `unite()`.


```r
# separate into original columns. Notice that we need to use two backslashes as escape character.
sep_gdp <- unite_gdp %>% 
  separate(overall_gdp, c("pop", "gdpPercap"), sep="\\*")

# show a preview
head(sep_gdp) %>% 
  knitr::kable()
```



country       continent    year   lifeExp  pop        gdpPercap   
------------  ----------  -----  --------  ---------  ------------
Afghanistan   Asia         1952    28.801  8425333    779.4453145 
Afghanistan   Asia         1957    30.332  9240934    820.8530296 
Afghanistan   Asia         1962    31.997  10267083   853.10071   
Afghanistan   Asia         1967    34.020  11537966   836.1971382 
Afghanistan   Asia         1972    36.088  13079460   739.9811058 
Afghanistan   Asia         1977    38.438  14880372   786.11336   

## Activity #2

**Make a tibble with one row per year and columns for life expectancy for two or more countries.**

Let's select countries in Oceania.


```r
lifeExp_Oceania <- gapminder %>% 
  # filter countries in Oceania
  filter(continent == "Oceania") %>% 
  # select necessary columns, make year as the first column
  select(year, country, lifeExp) %>% 
  # spread country to columns, with lifeExp as values
  spread(country, lifeExp)

# display the table
lifeExp_Oceania %>% 
  knitr::kable()
```



 year   Australia   New Zealand
-----  ----------  ------------
 1952      69.120        69.390
 1957      70.330        70.260
 1962      70.930        71.240
 1967      71.100        71.520
 1972      71.930        71.890
 1977      73.490        72.220
 1982      74.740        73.840
 1987      76.320        74.320
 1992      77.560        76.330
 1997      78.830        77.550
 2002      80.370        79.110
 2007      81.235        80.204

In Oceania we only have two countries. Then we make a scatterplot of the new tibble. First, we show the trends of lifeExp over years in these two countries.


```r
# fix names with spaces
names(lifeExp_Oceania) <- str_replace_all(names(lifeExp_Oceania), " ", "_")

lifeExp_Oceania %>% 
  ggplot() +
  # make a line plot with points for Australia
  geom_line(aes(x=year, y=Australia, color="Australia")) +
  geom_point(aes(x=year, y=Australia, color="Australia")) +
  # make a line plot with points for New_Zealand
  geom_line(aes(x=year, y=New_Zealand, color="New Zealand")) +
  geom_point(aes(x=year, y=New_Zealand, color="New Zealand")) +
  # change color legent
  scale_color_discrete("country")
```

![](hw04_files/figure-html/unnamed-chunk-10-1.png)<!-- -->

Let's also compare them side-by-side.


```r
lifeExp_Oceania %>% 
  # Auatralia as x axis and New_Zealand as y axis, color as year
  ggplot(aes(x=Australia, y=New_Zealand, color=factor(year))) +
  # make it a scatterplot
  geom_point() +
  # try to draw a regression curve
  geom_smooth(method="lm", se=FALSE, color="black")
```

![](hw04_files/figure-html/unnamed-chunk-11-1.png)<!-- -->

We can learn from the figures that, after around 1973, the lifeExp in Australia becomes larger than New_Zealand.

## Activity #3

**Compute some measure of life expectancy (mean? median? min? max?) for all possible combinations of continent and year. Reshape that to have one row per year and one variable for each continent. Or the other way around: one row per continent and one variable per year.**

Let's first compute the means of life expectancy for every possible combinations of continent and year.


```r
mean_lifeExp <- gapminder %>% 
  # group by continent and year
  group_by(continent, year) %>%
  # calculate the means
  summarise(
    mean_lifeExp = mean(lifeExp)
  )

# show the table
mean_lifeExp %>% 
  knitr::kable()
```



continent    year   mean_lifeExp
----------  -----  -------------
Africa       1952       39.13550
Africa       1957       41.26635
Africa       1962       43.31944
Africa       1967       45.33454
Africa       1972       47.45094
Africa       1977       49.58042
Africa       1982       51.59287
Africa       1987       53.34479
Africa       1992       53.62958
Africa       1997       53.59827
Africa       2002       53.32523
Africa       2007       54.80604
Americas     1952       53.27984
Americas     1957       55.96028
Americas     1962       58.39876
Americas     1967       60.41092
Americas     1972       62.39492
Americas     1977       64.39156
Americas     1982       66.22884
Americas     1987       68.09072
Americas     1992       69.56836
Americas     1997       71.15048
Americas     2002       72.42204
Americas     2007       73.60812
Asia         1952       46.31439
Asia         1957       49.31854
Asia         1962       51.56322
Asia         1967       54.66364
Asia         1972       57.31927
Asia         1977       59.61056
Asia         1982       62.61794
Asia         1987       64.85118
Asia         1992       66.53721
Asia         1997       68.02052
Asia         2002       69.23388
Asia         2007       70.72848
Europe       1952       64.40850
Europe       1957       66.70307
Europe       1962       68.53923
Europe       1967       69.73760
Europe       1972       70.77503
Europe       1977       71.93777
Europe       1982       72.80640
Europe       1987       73.64217
Europe       1992       74.44010
Europe       1997       75.50517
Europe       2002       76.70060
Europe       2007       77.64860
Oceania      1952       69.25500
Oceania      1957       70.29500
Oceania      1962       71.08500
Oceania      1967       71.31000
Oceania      1972       71.91000
Oceania      1977       72.85500
Oceania      1982       74.29000
Oceania      1987       75.32000
Oceania      1992       76.94500
Oceania      1997       78.19000
Oceania      2002       79.74000
Oceania      2007       80.71950

Then we reshape it to one row per year and one variable for each continent.


```r
# use spread to reshape continent as columns
reshape_mean_lifeExp <- mean_lifeExp %>%
  spread(continent, mean_lifeExp)

# show the table
reshape_mean_lifeExp %>% 
  knitr::kable()
```



 year     Africa   Americas       Asia     Europe   Oceania
-----  ---------  ---------  ---------  ---------  --------
 1952   39.13550   53.27984   46.31439   64.40850   69.2550
 1957   41.26635   55.96028   49.31854   66.70307   70.2950
 1962   43.31944   58.39876   51.56322   68.53923   71.0850
 1967   45.33454   60.41092   54.66364   69.73760   71.3100
 1972   47.45094   62.39492   57.31927   70.77503   71.9100
 1977   49.58042   64.39156   59.61056   71.93777   72.8550
 1982   51.59287   66.22884   62.61794   72.80640   74.2900
 1987   53.34479   68.09072   64.85118   73.64217   75.3200
 1992   53.62958   69.56836   66.53721   74.44010   76.9450
 1997   53.59827   71.15048   68.02052   75.50517   78.1900
 2002   53.32523   72.42204   69.23388   76.70060   79.7400
 2007   54.80604   73.60812   70.72848   77.64860   80.7195

The reshaped tibble is better, if you only want to have data of one continent. For example, we try to get data of Africa and show it as line plot.


```r
# original tibble
mean_lifeExp %>% 
  # need to filter continent as Africa
  filter(continent == "Africa") %>% 
  # year as x axis and mean_lifeExp as y axis
  ggplot(aes(x=year, y=mean_lifeExp)) +
  # make it a line plot with point
  geom_line() +
  geom_point()
```

![](hw04_files/figure-html/unnamed-chunk-14-1.png)<!-- -->

```r
reshape_mean_lifeExp %>% 
  # year as x axis and Africa as y axis
  ggplot(aes(x=year, y=Africa)) +
  # make it a line plot with point
  geom_line() +
  geom_point()
```

![](hw04_files/figure-html/unnamed-chunk-14-2.png)<!-- -->

The two plots are basically the same, except:

- Using the origianl tibble we need to filter data;
- The default label of y axis in the second figure is "Africa", and we do not need to change it.

## Activity #4

**In [Window functions](http://stat545.com/block010_dplyr-end-single-table.html#window-functions), we formed a tibble with 24 rows: 2 per year, giving the country with both the lowest and highest life expectancy (in Asia). Take that table (or a similar one for all continents) and reshape it so you have one row per year or per year * continent combination.**

First we get the table from the reference.


```r
# this piece of code is directly from the reference, so no commend is added
my_gap <- gapminder %>%
  filter(continent == "Asia") %>%
  select(year, country, lifeExp) %>%
  group_by(year) %>%
  filter(min_rank(desc(lifeExp)) < 2 | min_rank(lifeExp) < 2) %>% 
  arrange(year) %>%
  print(n = Inf)
```

```
## # A tibble: 24 x 3
## # Groups:   year [12]
##     year country     lifeExp
##    <int> <fct>         <dbl>
##  1  1952 Afghanistan    28.8
##  2  1952 Israel         65.4
##  3  1957 Afghanistan    30.3
##  4  1957 Israel         67.8
##  5  1962 Afghanistan    32.0
##  6  1962 Israel         69.4
##  7  1967 Afghanistan    34.0
##  8  1967 Japan          71.4
##  9  1972 Afghanistan    36.1
## 10  1972 Japan          73.4
## 11  1977 Cambodia       31.2
## 12  1977 Japan          75.4
## 13  1982 Afghanistan    39.9
## 14  1982 Japan          77.1
## 15  1987 Afghanistan    40.8
## 16  1987 Japan          78.7
## 17  1992 Afghanistan    41.7
## 18  1992 Japan          79.4
## 19  1997 Afghanistan    41.8
## 20  1997 Japan          80.7
## 21  2002 Afghanistan    42.1
## 22  2002 Japan          82  
## 23  2007 Afghanistan    43.8
## 24  2007 Japan          82.6
```

We reshape it into one row per year.


```r
# unite country and lifeExp
my_gap_unite <- my_gap %>% 
  unite(country_lifeExp, country, lifeExp, sep=",")

# get maximum records for each year (even rows)
my_gap_max <- my_gap_unite %>% 
  filter(row_number() %% 2 == 0)

# get minimum records for each year (odd rows)
my_gap_min <- my_gap_unite %>% 
  filter(row_number() %% 2 == 1)

# combine data together
my_gap_final <- data.frame(
  year = my_gap_max$year,
  max_country_lifeExp = my_gap_max$country_lifeExp,
  min_country_lifeExp = my_gap_min$country_lifeExp
)

# show the table
my_gap_final %>% 
  knitr::kable()
```



 year  max_country_lifeExp   min_country_lifeExp 
-----  --------------------  --------------------
 1952  Israel,65.39          Afghanistan,28.801  
 1957  Israel,67.84          Afghanistan,30.332  
 1962  Israel,69.39          Afghanistan,31.997  
 1967  Japan,71.43           Afghanistan,34.02   
 1972  Japan,73.42           Afghanistan,36.088  
 1977  Japan,75.38           Cambodia,31.22      
 1982  Japan,77.11           Afghanistan,39.854  
 1987  Japan,78.67           Afghanistan,40.822  
 1992  Japan,79.36           Afghanistan,41.674  
 1997  Japan,80.69           Afghanistan,41.763  
 2002  Japan,82              Afghanistan,42.129  
 2007  Japan,82.603          Afghanistan,43.828  

## Activity #5

**Make up a similar set of exercises for yourself, in the abstract or (even better) using Gapminder or other data, and solve them.**

According to the [data manipulation sample](https://gist.github.com/aammd/11386424), some of the functions have been already covered in the previous assignemtns:

- Group using `group_by()` and show statistics using `summarize()`.
- Subset using `filter()`.
- Sort using `arragnge()`.

We are going to explore the following functions in the next section, so we can also skip them right now:

- Join using `left_join()` and `merge()`.

Therefore, we focus on the following functions:

- Split using `dcast()`.
- Stack using `melt()`.
- Transpose using `t()`.

Some of these functions belong to package `reshape2`, and assuming it is already installed.


```r
# load reshape2
library(reshape2)
```

```
## 
## Attaching package: 'reshape2'
```

```
## The following object is masked from 'package:tidyr':
## 
##     smiths
```


### Split

Here we show that `dcast()` is actually similar to `spread()`. The following example is retrieved form Activity #4.


```r
split <- my_gap %>% 
  # year as rows and country as columns, fill lifeExp as values
  dcast(year~country, value.var="lifeExp")

# display the table
split %>% 
  knitr::kable()
```



 year   Afghanistan   Cambodia   Israel    Japan
-----  ------------  ---------  -------  -------
 1952        28.801         NA    65.39       NA
 1957        30.332         NA    67.84       NA
 1962        31.997         NA    69.39       NA
 1967        34.020         NA       NA   71.430
 1972        36.088         NA       NA   73.420
 1977            NA      31.22       NA   75.380
 1982        39.854         NA       NA   77.110
 1987        40.822         NA       NA   78.670
 1992        41.674         NA       NA   79.360
 1997        41.763         NA       NA   80.690
 2002        42.129         NA       NA   82.000
 2007        43.828         NA       NA   82.603

### Stack

Here we show that `melt()` is actually similar to `group()`. The following example is retrieved from Activity #1.


```r
melt_attributes <- mtcars_with_car %>% 
  # melt and use car as index
  melt(id="car")

# show previews 
head(melt_attributes) %>% 
  knitr::kable()
```



car                 variable    value
------------------  ---------  ------
Mazda RX4           mpg          21.0
Mazda RX4 Wag       mpg          21.0
Datsun 710          mpg          22.8
Hornet 4 Drive      mpg          21.4
Hornet Sportabout   mpg          18.7
Valiant             mpg          18.1

```r
tail(melt_attributes) %>% 
  knitr::kable()
```

      car              variable    value
----  ---------------  ---------  ------
347   Porsche 914-2    carb            2
348   Lotus Europa     carb            2
349   Ford Pantera L   carb            4
350   Ferrari Dino     carb            6
351   Maserati Bora    carb            8
352   Volvo 142E       carb            2


### Transpose

Let's try to transpose `mtcars`.


```r
# remove car
mtcars_ori <- mtcars %>% 
  select(-car)

# transpose data frame
mtcars_transpose <- data.frame(t(mtcars_ori))

# display the 
mtcars_transpose %>% 
  knitr::kable()
```

        Mazda.RX4   Mazda.RX4.Wag   Datsun.710   Hornet.4.Drive   Hornet.Sportabout   Valiant   Duster.360   Merc.240D   Merc.230   Merc.280   Merc.280C   Merc.450SE   Merc.450SL   Merc.450SLC   Cadillac.Fleetwood   Lincoln.Continental   Chrysler.Imperial   Fiat.128   Honda.Civic   Toyota.Corolla   Toyota.Corona   Dodge.Challenger   AMC.Javelin   Camaro.Z28   Pontiac.Firebird   Fiat.X1.9   Porsche.914.2   Lotus.Europa   Ford.Pantera.L   Ferrari.Dino   Maserati.Bora   Volvo.142E
-----  ----------  --------------  -----------  ---------------  ------------------  --------  -----------  ----------  ---------  ---------  ----------  -----------  -----------  ------------  -------------------  --------------------  ------------------  ---------  ------------  ---------------  --------------  -----------------  ------------  -----------  -----------------  ----------  --------------  -------------  ---------------  -------------  --------------  -----------
mpg         21.00          21.000        22.80           21.400               18.70     18.10        14.30       24.40      22.80      19.20       17.80        16.40        17.30         15.20                10.40                10.400              14.700      32.40        30.400           33.900          21.500              15.50        15.200        13.30             19.200      27.300           26.00         30.400            15.80          19.70           15.00        21.40
cyl          6.00           6.000         4.00            6.000                8.00      6.00         8.00        4.00       4.00       6.00        6.00         8.00         8.00          8.00                 8.00                 8.000               8.000       4.00         4.000            4.000           4.000               8.00         8.000         8.00              8.000       4.000            4.00          4.000             8.00           6.00            8.00         4.00
disp       160.00         160.000       108.00          258.000              360.00    225.00       360.00      146.70     140.80     167.60      167.60       275.80       275.80        275.80               472.00               460.000             440.000      78.70        75.700           71.100         120.100             318.00       304.000       350.00            400.000      79.000          120.30         95.100           351.00         145.00          301.00       121.00
hp         110.00         110.000        93.00          110.000              175.00    105.00       245.00       62.00      95.00     123.00      123.00       180.00       180.00        180.00               205.00               215.000             230.000      66.00        52.000           65.000          97.000             150.00       150.000       245.00            175.000      66.000           91.00        113.000           264.00         175.00          335.00       109.00
drat         3.90           3.900         3.85            3.080                3.15      2.76         3.21        3.69       3.92       3.92        3.92         3.07         3.07          3.07                 2.93                 3.000               3.230       4.08         4.930            4.220           3.700               2.76         3.150         3.73              3.080       4.080            4.43          3.770             4.22           3.62            3.54         4.11
wt           2.62           2.875         2.32            3.215                3.44      3.46         3.57        3.19       3.15       3.44        3.44         4.07         3.73          3.78                 5.25                 5.424               5.345       2.20         1.615            1.835           2.465               3.52         3.435         3.84              3.845       1.935            2.14          1.513             3.17           2.77            3.57         2.78
qsec        16.46          17.020        18.61           19.440               17.02     20.22        15.84       20.00      22.90      18.30       18.90        17.40        17.60         18.00                17.98                17.820              17.420      19.47        18.520           19.900          20.010              16.87        17.300        15.41             17.050      18.900           16.70         16.900            14.50          15.50           14.60        18.60
vs           0.00           0.000         1.00            1.000                0.00      1.00         0.00        1.00       1.00       1.00        1.00         0.00         0.00          0.00                 0.00                 0.000               0.000       1.00         1.000            1.000           1.000               0.00         0.000         0.00              0.000       1.000            0.00          1.000             0.00           0.00            0.00         1.00
am           1.00           1.000         1.00            0.000                0.00      0.00         0.00        0.00       0.00       0.00        0.00         0.00         0.00          0.00                 0.00                 0.000               0.000       1.00         1.000            1.000           0.000               0.00         0.000         0.00              0.000       1.000            1.00          1.000             1.00           1.00            1.00         1.00
gear         4.00           4.000         4.00            3.000                3.00      3.00         3.00        4.00       4.00       4.00        4.00         3.00         3.00          3.00                 3.00                 3.000               3.000       4.00         4.000            4.000           3.000               3.00         3.000         3.00              3.000       4.000            5.00          5.000             5.00           5.00            5.00         4.00
carb         4.00           4.000         1.00            1.000                2.00      1.00         4.00        2.00       2.00       4.00        4.00         3.00         3.00          3.00                 4.00                 4.000               4.000       1.00         2.000            1.000           1.000               2.00         2.000         4.00              2.000       1.000            2.00          2.000             4.00           6.00            8.00         2.00

# Join Prompts (join, merge, look up)

## Activity #1

**Create a second data frame, complementary to Gapminder. Join this with (part of) Gapminder using a dplyr join function and make some observations about the process and result. Explore the different types of joins.**

According to [Data from Gapminder](https://cran.r-project.org/web/packages/gapminder/gapminder.pdf), there is a data frame called `country_codes` in package `gapminder`, which is suitable in our example.


```r
# show a preview of country_code
head(country_codes) %>% 
  knitr::kable()
```



country       iso_alpha    iso_num
------------  ----------  --------
Afghanistan   AFG                4
Albania       ALB                8
Algeria       DZA               12
Angola        AGO               24
Argentina     ARG               32
Armenia       ARM               51

`country_codes` contains rows for all country, so somehow for every row in the full `gapminder` data frame, we can find at least one matching records in `country_codes`. To make it more intersting, we trim `gapminder` to include only countries in "Americas". We also try to select a single year, say 1952.


```r
gapminder_Americas <- gapminder %>% 
  # filter continent as Americas
  filter(continent == "Americas", year == 1952)

# show a preview
head(gapminder_Americas) %>% 
  knitr::kable()
```



country     continent    year   lifeExp        pop   gdpPercap
----------  ----------  -----  --------  ---------  ----------
Argentina   Americas     1952    62.485   17876956    5911.315
Bolivia     Americas     1952    40.414    2883315    2677.326
Brazil      Americas     1952    50.917   56602560    2108.944
Canada      Americas     1952    68.750   14785584   11367.161
Chile       Americas     1952    54.745    6377619    3939.979
Colombia    Americas     1952    50.643   12350771    2144.115


We explore the following join functions:

- `inner_join()`: return all rows from x where there are matching values in y, and all columns from x and y. If there are multiple matches between x and y, all combination of the matches are returned. This is a mutating join.
- `semi_join()`: return all rows from x where there are matching values in y, keeping just columns from x. A semi join differs from an inner join because an inner join will return one row of x for each matching row of y, where a semi join will never duplicate rows of x. This is a filtering join.
- `left_join()`: return all rows from x, and all columns from x and y. If there are multiple matches between x and y, all combination of the matches are returned. This is a mutating join.
- `anti_join()`: return all rows from x where there are not matching values in y, keeping just columns from x. This is a filtering join.
- `full_join()`: return all rows and all columns from both x and y. Where there are not matching values, returns NA for the one missing. This is a mutating join.

### `inner_join()`

In the following two examples, we change the order of `x` and `y`.


```r
inner_join(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factor and character vector, coercing
## into character vector
```



country               continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
--------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Argentina             Americas     1952    62.485    17876956    5911.315  ARG               32
Bolivia               Americas     1952    40.414     2883315    2677.326  BOL               68
Brazil                Americas     1952    50.917    56602560    2108.944  BRA               76
Canada                Americas     1952    68.750    14785584   11367.161  CAN              124
Chile                 Americas     1952    54.745     6377619    3939.979  CHL              152
Colombia              Americas     1952    50.643    12350771    2144.115  COL              170
Costa Rica            Americas     1952    57.206      926317    2627.009  CRI              188
Cuba                  Americas     1952    59.421     6007797    5586.539  CUB              192
Dominican Republic    Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador               Americas     1952    48.357     3548753    3522.111  ECU              218
El Salvador           Americas     1952    45.262     2042865    3048.303  SLV              222
Guatemala             Americas     1952    42.023     3146381    2428.238  GTM              320
Haiti                 Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras              Americas     1952    41.912     1517453    2194.926  HND              340
Jamaica               Americas     1952    58.530     1426095    2898.531  JAM              388
Mexico                Americas     1952    50.789    30144317    3478.126  MEX              484
Nicaragua             Americas     1952    42.314     1165790    3112.364  NIC              558
Panama                Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay              Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                  Americas     1952    43.902     8025700    3758.523  PER              604
Puerto Rico           Americas     1952    64.280     2227000    3081.960  PRI              630
Trinidad and Tobago   Americas     1952    59.100      662850    3023.272  TTO              780
United States         Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay               Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela             Americas     1952    55.088     5439568    7689.800  VEN              862


```r
inner_join(x=country_codes, y=gapminder_Americas) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining character vector and factor, coercing
## into character vector
```



country               iso_alpha    iso_num  continent    year   lifeExp         pop   gdpPercap
--------------------  ----------  --------  ----------  -----  --------  ----------  ----------
Argentina             ARG               32  Americas     1952    62.485    17876956    5911.315
Bolivia               BOL               68  Americas     1952    40.414     2883315    2677.326
Brazil                BRA               76  Americas     1952    50.917    56602560    2108.944
Canada                CAN              124  Americas     1952    68.750    14785584   11367.161
Chile                 CHL              152  Americas     1952    54.745     6377619    3939.979
Colombia              COL              170  Americas     1952    50.643    12350771    2144.115
Costa Rica            CRI              188  Americas     1952    57.206      926317    2627.009
Cuba                  CUB              192  Americas     1952    59.421     6007797    5586.539
Dominican Republic    DOM              214  Americas     1952    45.928     2491346    1397.717
Ecuador               ECU              218  Americas     1952    48.357     3548753    3522.111
El Salvador           SLV              222  Americas     1952    45.262     2042865    3048.303
Guatemala             GTM              320  Americas     1952    42.023     3146381    2428.238
Haiti                 HTI              332  Americas     1952    37.579     3201488    1840.367
Honduras              HND              340  Americas     1952    41.912     1517453    2194.926
Jamaica               JAM              388  Americas     1952    58.530     1426095    2898.531
Mexico                MEX              484  Americas     1952    50.789    30144317    3478.126
Nicaragua             NIC              558  Americas     1952    42.314     1165790    3112.364
Panama                PAN              591  Americas     1952    55.191      940080    2480.380
Paraguay              PRY              600  Americas     1952    62.649     1555876    1952.309
Peru                  PER              604  Americas     1952    43.902     8025700    3758.523
Puerto Rico           PRI              630  Americas     1952    64.280     2227000    3081.960
Trinidad and Tobago   TTO              780  Americas     1952    59.100      662850    3023.272
United States         USA              840  Americas     1952    68.440   157553000   13990.482
Uruguay               URY              858  Americas     1952    66.071     2252965    5716.767
Venezuela             VEN              862  Americas     1952    55.088     5439568    7689.800

After `inner_join()`, we get rows with countries only exist in `gapminder_Americas`, but for each row, we have columns both from `gapminder_Americas` and `country_codes`. Changing the order of `x` and `y` does not affect the results, since `inner_join()` tries to find overlapping countries in two data frames.

### `semi_join()`

In the following two examples, we change the order of `x` and `y`.


```r
semi_join(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factor and character vector, coercing
## into character vector
```



country               continent    year   lifeExp         pop   gdpPercap
--------------------  ----------  -----  --------  ----------  ----------
Argentina             Americas     1952    62.485    17876956    5911.315
Bolivia               Americas     1952    40.414     2883315    2677.326
Brazil                Americas     1952    50.917    56602560    2108.944
Canada                Americas     1952    68.750    14785584   11367.161
Chile                 Americas     1952    54.745     6377619    3939.979
Colombia              Americas     1952    50.643    12350771    2144.115
Costa Rica            Americas     1952    57.206      926317    2627.009
Cuba                  Americas     1952    59.421     6007797    5586.539
Dominican Republic    Americas     1952    45.928     2491346    1397.717
Ecuador               Americas     1952    48.357     3548753    3522.111
El Salvador           Americas     1952    45.262     2042865    3048.303
Guatemala             Americas     1952    42.023     3146381    2428.238
Haiti                 Americas     1952    37.579     3201488    1840.367
Honduras              Americas     1952    41.912     1517453    2194.926
Jamaica               Americas     1952    58.530     1426095    2898.531
Mexico                Americas     1952    50.789    30144317    3478.126
Nicaragua             Americas     1952    42.314     1165790    3112.364
Panama                Americas     1952    55.191      940080    2480.380
Paraguay              Americas     1952    62.649     1555876    1952.309
Peru                  Americas     1952    43.902     8025700    3758.523
Puerto Rico           Americas     1952    64.280     2227000    3081.960
Trinidad and Tobago   Americas     1952    59.100      662850    3023.272
United States         Americas     1952    68.440   157553000   13990.482
Uruguay               Americas     1952    66.071     2252965    5716.767
Venezuela             Americas     1952    55.088     5439568    7689.800


```r
semi_join(x=country_codes, y=gapminder_Americas) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining character vector and factor, coercing
## into character vector
```



country               iso_alpha    iso_num
--------------------  ----------  --------
Argentina             ARG               32
Bolivia               BOL               68
Brazil                BRA               76
Canada                CAN              124
Chile                 CHL              152
Colombia              COL              170
Costa Rica            CRI              188
Cuba                  CUB              192
Dominican Republic    DOM              214
Ecuador               ECU              218
El Salvador           SLV              222
Guatemala             GTM              320
Haiti                 HTI              332
Honduras              HND              340
Jamaica               JAM              388
Mexico                MEX              484
Nicaragua             NIC              558
Panama                PAN              591
Paraguay              PRY              600
Peru                  PER              604
Puerto Rico           PRI              630
Trinidad and Tobago   TTO              780
United States         USA              840
Uruguay               URY              858
Venezuela             VEN              862

Compare to `inner_join()`, `semi_join()` also returns overlapping countries only as rows. However, the columns depend on which data frame is provided as `x`.

### `left_join()`

In the following two examples, we change the order of `x` and `y`.


```r
left_join(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factor and character vector, coercing
## into character vector
```



country               continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
--------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Argentina             Americas     1952    62.485    17876956    5911.315  ARG               32
Bolivia               Americas     1952    40.414     2883315    2677.326  BOL               68
Brazil                Americas     1952    50.917    56602560    2108.944  BRA               76
Canada                Americas     1952    68.750    14785584   11367.161  CAN              124
Chile                 Americas     1952    54.745     6377619    3939.979  CHL              152
Colombia              Americas     1952    50.643    12350771    2144.115  COL              170
Costa Rica            Americas     1952    57.206      926317    2627.009  CRI              188
Cuba                  Americas     1952    59.421     6007797    5586.539  CUB              192
Dominican Republic    Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador               Americas     1952    48.357     3548753    3522.111  ECU              218
El Salvador           Americas     1952    45.262     2042865    3048.303  SLV              222
Guatemala             Americas     1952    42.023     3146381    2428.238  GTM              320
Haiti                 Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras              Americas     1952    41.912     1517453    2194.926  HND              340
Jamaica               Americas     1952    58.530     1426095    2898.531  JAM              388
Mexico                Americas     1952    50.789    30144317    3478.126  MEX              484
Nicaragua             Americas     1952    42.314     1165790    3112.364  NIC              558
Panama                Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay              Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                  Americas     1952    43.902     8025700    3758.523  PER              604
Puerto Rico           Americas     1952    64.280     2227000    3081.960  PRI              630
Trinidad and Tobago   Americas     1952    59.100      662850    3023.272  TTO              780
United States         Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay               Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela             Americas     1952    55.088     5439568    7689.800  VEN              862


```r
left_join(x=country_codes, y=gapminder_Americas)  %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining character vector and factor, coercing
## into character vector
```



country                    iso_alpha    iso_num  continent    year   lifeExp         pop   gdpPercap
-------------------------  ----------  --------  ----------  -----  --------  ----------  ----------
Afghanistan                AFG                4  NA             NA        NA          NA          NA
Albania                    ALB                8  NA             NA        NA          NA          NA
Algeria                    DZA               12  NA             NA        NA          NA          NA
Angola                     AGO               24  NA             NA        NA          NA          NA
Argentina                  ARG               32  Americas     1952    62.485    17876956    5911.315
Armenia                    ARM               51  NA             NA        NA          NA          NA
Aruba                      ABW              533  NA             NA        NA          NA          NA
Australia                  AUS               36  NA             NA        NA          NA          NA
Austria                    AUT               40  NA             NA        NA          NA          NA
Azerbaijan                 AZE               31  NA             NA        NA          NA          NA
Bahamas                    BHS               44  NA             NA        NA          NA          NA
Bahrain                    BHR               48  NA             NA        NA          NA          NA
Bangladesh                 BGD               50  NA             NA        NA          NA          NA
Barbados                   BRB               52  NA             NA        NA          NA          NA
Belarus                    BLR              112  NA             NA        NA          NA          NA
Belgium                    BEL               56  NA             NA        NA          NA          NA
Belize                     BLZ               84  NA             NA        NA          NA          NA
Benin                      BEN              204  NA             NA        NA          NA          NA
Bhutan                     BTN               64  NA             NA        NA          NA          NA
Bolivia                    BOL               68  Americas     1952    40.414     2883315    2677.326
Bosnia and Herzegovina     BIH               70  NA             NA        NA          NA          NA
Botswana                   BWA               72  NA             NA        NA          NA          NA
Brazil                     BRA               76  Americas     1952    50.917    56602560    2108.944
Brunei                     BRN               96  NA             NA        NA          NA          NA
Bulgaria                   BGR              100  NA             NA        NA          NA          NA
Burkina Faso               BFA              854  NA             NA        NA          NA          NA
Burundi                    BDI              108  NA             NA        NA          NA          NA
Cambodia                   KHM              116  NA             NA        NA          NA          NA
Cameroon                   CMR              120  NA             NA        NA          NA          NA
Canada                     CAN              124  Americas     1952    68.750    14785584   11367.161
Cape Verde                 CPV              132  NA             NA        NA          NA          NA
Central African Republic   CAF              140  NA             NA        NA          NA          NA
Chad                       TCD              148  NA             NA        NA          NA          NA
Chile                      CHL              152  Americas     1952    54.745     6377619    3939.979
China                      CHN              156  NA             NA        NA          NA          NA
Colombia                   COL              170  Americas     1952    50.643    12350771    2144.115
Comoros                    COM              174  NA             NA        NA          NA          NA
Congo, Dem. Rep.           COD              180  NA             NA        NA          NA          NA
Congo, Rep.                COG              178  NA             NA        NA          NA          NA
Costa Rica                 CRI              188  Americas     1952    57.206      926317    2627.009
Cote d'Ivoire              CIV              384  NA             NA        NA          NA          NA
Croatia                    HRV              191  NA             NA        NA          NA          NA
Cuba                       CUB              192  Americas     1952    59.421     6007797    5586.539
Cyprus                     CYP              196  NA             NA        NA          NA          NA
Czech Republic             CZE              203  NA             NA        NA          NA          NA
Denmark                    DNK              208  NA             NA        NA          NA          NA
Djibouti                   DJI              262  NA             NA        NA          NA          NA
Dominican Republic         DOM              214  Americas     1952    45.928     2491346    1397.717
Ecuador                    ECU              218  Americas     1952    48.357     3548753    3522.111
Egypt                      EGY              818  NA             NA        NA          NA          NA
El Salvador                SLV              222  Americas     1952    45.262     2042865    3048.303
Equatorial Guinea          GNQ              226  NA             NA        NA          NA          NA
Eritrea                    ERI              232  NA             NA        NA          NA          NA
Estonia                    EST              233  NA             NA        NA          NA          NA
Ethiopia                   ETH              231  NA             NA        NA          NA          NA
Fiji                       FJI              242  NA             NA        NA          NA          NA
Finland                    FIN              246  NA             NA        NA          NA          NA
France                     FRA              250  NA             NA        NA          NA          NA
French Guiana              GUF              254  NA             NA        NA          NA          NA
French Polynesia           PYF              258  NA             NA        NA          NA          NA
Gabon                      GAB              266  NA             NA        NA          NA          NA
Gambia                     GMB              270  NA             NA        NA          NA          NA
Georgia                    GEO              268  NA             NA        NA          NA          NA
Germany                    DEU              276  NA             NA        NA          NA          NA
Ghana                      GHA              288  NA             NA        NA          NA          NA
Greece                     GRC              300  NA             NA        NA          NA          NA
Grenada                    GRD              308  NA             NA        NA          NA          NA
Guadeloupe                 GLP              312  NA             NA        NA          NA          NA
Guatemala                  GTM              320  Americas     1952    42.023     3146381    2428.238
Guinea                     GIN              324  NA             NA        NA          NA          NA
Guinea-Bissau              GNB              624  NA             NA        NA          NA          NA
Guyana                     GUY              328  NA             NA        NA          NA          NA
Haiti                      HTI              332  Americas     1952    37.579     3201488    1840.367
Honduras                   HND              340  Americas     1952    41.912     1517453    2194.926
Hong Kong, China           HKG              344  NA             NA        NA          NA          NA
Hungary                    HUN              348  NA             NA        NA          NA          NA
Iceland                    ISL              352  NA             NA        NA          NA          NA
India                      IND              356  NA             NA        NA          NA          NA
Indonesia                  IDN              360  NA             NA        NA          NA          NA
Iran                       IRN              364  NA             NA        NA          NA          NA
Iraq                       IRQ              368  NA             NA        NA          NA          NA
Ireland                    IRL              372  NA             NA        NA          NA          NA
Israel                     ISR              376  NA             NA        NA          NA          NA
Italy                      ITA              380  NA             NA        NA          NA          NA
Jamaica                    JAM              388  Americas     1952    58.530     1426095    2898.531
Japan                      JPN              392  NA             NA        NA          NA          NA
Jordan                     JOR              400  NA             NA        NA          NA          NA
Kazakhstan                 KAZ              398  NA             NA        NA          NA          NA
Kenya                      KEN              404  NA             NA        NA          NA          NA
Korea, Dem. Rep.           KOR              410  NA             NA        NA          NA          NA
Korea, Rep.                KOR              410  NA             NA        NA          NA          NA
Kuwait                     KWT              414  NA             NA        NA          NA          NA
Latvia                     LVA              428  NA             NA        NA          NA          NA
Lebanon                    LBN              422  NA             NA        NA          NA          NA
Lesotho                    LSO              426  NA             NA        NA          NA          NA
Liberia                    LBR              430  NA             NA        NA          NA          NA
Libya                      LBY              434  NA             NA        NA          NA          NA
Lithuania                  LTU              440  NA             NA        NA          NA          NA
Luxembourg                 LUX              442  NA             NA        NA          NA          NA
Macao, China               MAC              446  NA             NA        NA          NA          NA
Madagascar                 MDG              450  NA             NA        NA          NA          NA
Malawi                     MWI              454  NA             NA        NA          NA          NA
Malaysia                   MYS              458  NA             NA        NA          NA          NA
Maldives                   MDV              462  NA             NA        NA          NA          NA
Mali                       MLI              466  NA             NA        NA          NA          NA
Malta                      MLT              470  NA             NA        NA          NA          NA
Martinique                 MTQ              474  NA             NA        NA          NA          NA
Mauritania                 MRT              478  NA             NA        NA          NA          NA
Mauritius                  MUS              480  NA             NA        NA          NA          NA
Mexico                     MEX              484  Americas     1952    50.789    30144317    3478.126
Micronesia, Fed. Sts.      FSM              583  NA             NA        NA          NA          NA
Moldova                    MDA              498  NA             NA        NA          NA          NA
Mongolia                   MNG              496  NA             NA        NA          NA          NA
Montenegro                 MNE              499  NA             NA        NA          NA          NA
Morocco                    MAR              504  NA             NA        NA          NA          NA
Mozambique                 MOZ              508  NA             NA        NA          NA          NA
Myanmar                    MMR              104  NA             NA        NA          NA          NA
Namibia                    NAM              516  NA             NA        NA          NA          NA
Nepal                      NPL              524  NA             NA        NA          NA          NA
Netherlands                NLD              528  NA             NA        NA          NA          NA
Netherlands Antilles       ANT              530  NA             NA        NA          NA          NA
New Caledonia              NCL              540  NA             NA        NA          NA          NA
New Zealand                NZL              554  NA             NA        NA          NA          NA
Nicaragua                  NIC              558  Americas     1952    42.314     1165790    3112.364
Niger                      NER              562  NA             NA        NA          NA          NA
Nigeria                    NGA              566  NA             NA        NA          NA          NA
Norway                     NOR              578  NA             NA        NA          NA          NA
Oman                       OMN              512  NA             NA        NA          NA          NA
Pakistan                   PAK              586  NA             NA        NA          NA          NA
Panama                     PAN              591  Americas     1952    55.191      940080    2480.380
Papua New Guinea           PNG              598  NA             NA        NA          NA          NA
Paraguay                   PRY              600  Americas     1952    62.649     1555876    1952.309
Peru                       PER              604  Americas     1952    43.902     8025700    3758.523
Philippines                PHL              608  NA             NA        NA          NA          NA
Poland                     POL              616  NA             NA        NA          NA          NA
Portugal                   PRT              620  NA             NA        NA          NA          NA
Puerto Rico                PRI              630  Americas     1952    64.280     2227000    3081.960
Qatar                      QAT              634  NA             NA        NA          NA          NA
Reunion                    REU              638  NA             NA        NA          NA          NA
Romania                    ROU              642  NA             NA        NA          NA          NA
Russia                     RUS              643  NA             NA        NA          NA          NA
Rwanda                     RWA              646  NA             NA        NA          NA          NA
Samoa                      WSM              882  NA             NA        NA          NA          NA
Sao Tome and Principe      STP              678  NA             NA        NA          NA          NA
Saudi Arabia               SAU              682  NA             NA        NA          NA          NA
Senegal                    SEN              686  NA             NA        NA          NA          NA
Serbia                     SRB              688  NA             NA        NA          NA          NA
Sierra Leone               SLE              694  NA             NA        NA          NA          NA
Singapore                  SGP              702  NA             NA        NA          NA          NA
Slovak Republic            SVK              703  NA             NA        NA          NA          NA
Slovenia                   SVN              705  NA             NA        NA          NA          NA
Solomon Islands            SLB               90  NA             NA        NA          NA          NA
Somalia                    SOM              706  NA             NA        NA          NA          NA
South Africa               ZAF              710  NA             NA        NA          NA          NA
Spain                      ESP              724  NA             NA        NA          NA          NA
Sri Lanka                  LKA              144  NA             NA        NA          NA          NA
Sudan                      SDN              736  NA             NA        NA          NA          NA
Suriname                   SUR              740  NA             NA        NA          NA          NA
Swaziland                  SWZ              748  NA             NA        NA          NA          NA
Sweden                     SWE              752  NA             NA        NA          NA          NA
Switzerland                CHE              756  NA             NA        NA          NA          NA
Syria                      SYR              760  NA             NA        NA          NA          NA
Taiwan                     TWN              158  NA             NA        NA          NA          NA
Tajikistan                 TJK              762  NA             NA        NA          NA          NA
Tanzania                   TZA              834  NA             NA        NA          NA          NA
Thailand                   THA              764  NA             NA        NA          NA          NA
Timor-Leste                TLS              626  NA             NA        NA          NA          NA
Togo                       TGO              768  NA             NA        NA          NA          NA
Tonga                      TON              776  NA             NA        NA          NA          NA
Trinidad and Tobago        TTO              780  Americas     1952    59.100      662850    3023.272
Tunisia                    TUN              788  NA             NA        NA          NA          NA
Turkey                     TUR              792  NA             NA        NA          NA          NA
Turkmenistan               TKM              795  NA             NA        NA          NA          NA
Uganda                     UGA              800  NA             NA        NA          NA          NA
Ukraine                    UKR              804  NA             NA        NA          NA          NA
United Arab Emirates       ARE              784  NA             NA        NA          NA          NA
United Kingdom             GBR              826  NA             NA        NA          NA          NA
United States              USA              840  Americas     1952    68.440   157553000   13990.482
Uruguay                    URY              858  Americas     1952    66.071     2252965    5716.767
Uzbekistan                 UZB              860  NA             NA        NA          NA          NA
Vanuatu                    VUT              548  NA             NA        NA          NA          NA
Venezuela                  VEN              862  Americas     1952    55.088     5439568    7689.800
Vietnam                    VNM              704  NA             NA        NA          NA          NA
West Bank and Gaza         PSE              275  NA             NA        NA          NA          NA
Yemen, Rep.                YEM              887  NA             NA        NA          NA          NA
Zambia                     ZMB              894  NA             NA        NA          NA          NA
Zimbabwe                   ZWE              716  NA             NA        NA          NA          NA

Using `left_join()`, rows depend on what countries we have in `x`. All columns in `x` and `y` are used to form the final table. However, since we cannot find all countries in `gapminder_Americas`, for those countries only exist in `country_codes`, the values are `NA` for columns in `gapminder_Americas`.

### `anti_join()`

In the following two examples, we change the order of `x` and `y`.


```r
anti_join(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factor and character vector, coercing
## into character vector
```



country   continent    year   lifeExp   pop   gdpPercap
--------  ----------  -----  --------  ----  ----------


```r
anti_join(x=country_codes, y=gapminder_Americas)  %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining character vector and factor, coercing
## into character vector
```



country                    iso_alpha    iso_num
-------------------------  ----------  --------
Afghanistan                AFG                4
Albania                    ALB                8
Algeria                    DZA               12
Angola                     AGO               24
Armenia                    ARM               51
Aruba                      ABW              533
Australia                  AUS               36
Austria                    AUT               40
Azerbaijan                 AZE               31
Bahamas                    BHS               44
Bahrain                    BHR               48
Bangladesh                 BGD               50
Barbados                   BRB               52
Belarus                    BLR              112
Belgium                    BEL               56
Belize                     BLZ               84
Benin                      BEN              204
Bhutan                     BTN               64
Bosnia and Herzegovina     BIH               70
Botswana                   BWA               72
Brunei                     BRN               96
Bulgaria                   BGR              100
Burkina Faso               BFA              854
Burundi                    BDI              108
Cambodia                   KHM              116
Cameroon                   CMR              120
Cape Verde                 CPV              132
Central African Republic   CAF              140
Chad                       TCD              148
China                      CHN              156
Comoros                    COM              174
Congo, Dem. Rep.           COD              180
Congo, Rep.                COG              178
Cote d'Ivoire              CIV              384
Croatia                    HRV              191
Cyprus                     CYP              196
Czech Republic             CZE              203
Denmark                    DNK              208
Djibouti                   DJI              262
Egypt                      EGY              818
Equatorial Guinea          GNQ              226
Eritrea                    ERI              232
Estonia                    EST              233
Ethiopia                   ETH              231
Fiji                       FJI              242
Finland                    FIN              246
France                     FRA              250
French Guiana              GUF              254
French Polynesia           PYF              258
Gabon                      GAB              266
Gambia                     GMB              270
Georgia                    GEO              268
Germany                    DEU              276
Ghana                      GHA              288
Greece                     GRC              300
Grenada                    GRD              308
Guadeloupe                 GLP              312
Guinea                     GIN              324
Guinea-Bissau              GNB              624
Guyana                     GUY              328
Hong Kong, China           HKG              344
Hungary                    HUN              348
Iceland                    ISL              352
India                      IND              356
Indonesia                  IDN              360
Iran                       IRN              364
Iraq                       IRQ              368
Ireland                    IRL              372
Israel                     ISR              376
Italy                      ITA              380
Japan                      JPN              392
Jordan                     JOR              400
Kazakhstan                 KAZ              398
Kenya                      KEN              404
Korea, Dem. Rep.           KOR              410
Korea, Rep.                KOR              410
Kuwait                     KWT              414
Latvia                     LVA              428
Lebanon                    LBN              422
Lesotho                    LSO              426
Liberia                    LBR              430
Libya                      LBY              434
Lithuania                  LTU              440
Luxembourg                 LUX              442
Macao, China               MAC              446
Madagascar                 MDG              450
Malawi                     MWI              454
Malaysia                   MYS              458
Maldives                   MDV              462
Mali                       MLI              466
Malta                      MLT              470
Martinique                 MTQ              474
Mauritania                 MRT              478
Mauritius                  MUS              480
Micronesia, Fed. Sts.      FSM              583
Moldova                    MDA              498
Mongolia                   MNG              496
Montenegro                 MNE              499
Morocco                    MAR              504
Mozambique                 MOZ              508
Myanmar                    MMR              104
Namibia                    NAM              516
Nepal                      NPL              524
Netherlands                NLD              528
Netherlands Antilles       ANT              530
New Caledonia              NCL              540
New Zealand                NZL              554
Niger                      NER              562
Nigeria                    NGA              566
Norway                     NOR              578
Oman                       OMN              512
Pakistan                   PAK              586
Papua New Guinea           PNG              598
Philippines                PHL              608
Poland                     POL              616
Portugal                   PRT              620
Qatar                      QAT              634
Reunion                    REU              638
Romania                    ROU              642
Russia                     RUS              643
Rwanda                     RWA              646
Samoa                      WSM              882
Sao Tome and Principe      STP              678
Saudi Arabia               SAU              682
Senegal                    SEN              686
Serbia                     SRB              688
Sierra Leone               SLE              694
Singapore                  SGP              702
Slovak Republic            SVK              703
Slovenia                   SVN              705
Solomon Islands            SLB               90
Somalia                    SOM              706
South Africa               ZAF              710
Spain                      ESP              724
Sri Lanka                  LKA              144
Sudan                      SDN              736
Suriname                   SUR              740
Swaziland                  SWZ              748
Sweden                     SWE              752
Switzerland                CHE              756
Syria                      SYR              760
Taiwan                     TWN              158
Tajikistan                 TJK              762
Tanzania                   TZA              834
Thailand                   THA              764
Timor-Leste                TLS              626
Togo                       TGO              768
Tonga                      TON              776
Tunisia                    TUN              788
Turkey                     TUR              792
Turkmenistan               TKM              795
Uganda                     UGA              800
Ukraine                    UKR              804
United Arab Emirates       ARE              784
United Kingdom             GBR              826
Uzbekistan                 UZB              860
Vanuatu                    VUT              548
Vietnam                    VNM              704
West Bank and Gaza         PSE              275
Yemen, Rep.                YEM              887
Zambia                     ZMB              894
Zimbabwe                   ZWE              716

`anti_join()` is interesting that it shows rows in `x` that cannot be found a matching value in `y`, and columns to shown depend on `x`:

- Since one can find all country in `gapminder_Americas` in `country_codes`, the first table is empty.
- The second table actually shows countries that do not exist in `gapminder_Americas`.

### `full_join()`

In the following two examples, we change the order of `x` and `y`.


```r
full_join(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factor and character vector, coercing
## into character vector
```



country                    continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
-------------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Argentina                  Americas     1952    62.485    17876956    5911.315  ARG               32
Bolivia                    Americas     1952    40.414     2883315    2677.326  BOL               68
Brazil                     Americas     1952    50.917    56602560    2108.944  BRA               76
Canada                     Americas     1952    68.750    14785584   11367.161  CAN              124
Chile                      Americas     1952    54.745     6377619    3939.979  CHL              152
Colombia                   Americas     1952    50.643    12350771    2144.115  COL              170
Costa Rica                 Americas     1952    57.206      926317    2627.009  CRI              188
Cuba                       Americas     1952    59.421     6007797    5586.539  CUB              192
Dominican Republic         Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador                    Americas     1952    48.357     3548753    3522.111  ECU              218
El Salvador                Americas     1952    45.262     2042865    3048.303  SLV              222
Guatemala                  Americas     1952    42.023     3146381    2428.238  GTM              320
Haiti                      Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras                   Americas     1952    41.912     1517453    2194.926  HND              340
Jamaica                    Americas     1952    58.530     1426095    2898.531  JAM              388
Mexico                     Americas     1952    50.789    30144317    3478.126  MEX              484
Nicaragua                  Americas     1952    42.314     1165790    3112.364  NIC              558
Panama                     Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay                   Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                       Americas     1952    43.902     8025700    3758.523  PER              604
Puerto Rico                Americas     1952    64.280     2227000    3081.960  PRI              630
Trinidad and Tobago        Americas     1952    59.100      662850    3023.272  TTO              780
United States              Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay                    Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela                  Americas     1952    55.088     5439568    7689.800  VEN              862
Afghanistan                NA             NA        NA          NA          NA  AFG                4
Albania                    NA             NA        NA          NA          NA  ALB                8
Algeria                    NA             NA        NA          NA          NA  DZA               12
Angola                     NA             NA        NA          NA          NA  AGO               24
Armenia                    NA             NA        NA          NA          NA  ARM               51
Aruba                      NA             NA        NA          NA          NA  ABW              533
Australia                  NA             NA        NA          NA          NA  AUS               36
Austria                    NA             NA        NA          NA          NA  AUT               40
Azerbaijan                 NA             NA        NA          NA          NA  AZE               31
Bahamas                    NA             NA        NA          NA          NA  BHS               44
Bahrain                    NA             NA        NA          NA          NA  BHR               48
Bangladesh                 NA             NA        NA          NA          NA  BGD               50
Barbados                   NA             NA        NA          NA          NA  BRB               52
Belarus                    NA             NA        NA          NA          NA  BLR              112
Belgium                    NA             NA        NA          NA          NA  BEL               56
Belize                     NA             NA        NA          NA          NA  BLZ               84
Benin                      NA             NA        NA          NA          NA  BEN              204
Bhutan                     NA             NA        NA          NA          NA  BTN               64
Bosnia and Herzegovina     NA             NA        NA          NA          NA  BIH               70
Botswana                   NA             NA        NA          NA          NA  BWA               72
Brunei                     NA             NA        NA          NA          NA  BRN               96
Bulgaria                   NA             NA        NA          NA          NA  BGR              100
Burkina Faso               NA             NA        NA          NA          NA  BFA              854
Burundi                    NA             NA        NA          NA          NA  BDI              108
Cambodia                   NA             NA        NA          NA          NA  KHM              116
Cameroon                   NA             NA        NA          NA          NA  CMR              120
Cape Verde                 NA             NA        NA          NA          NA  CPV              132
Central African Republic   NA             NA        NA          NA          NA  CAF              140
Chad                       NA             NA        NA          NA          NA  TCD              148
China                      NA             NA        NA          NA          NA  CHN              156
Comoros                    NA             NA        NA          NA          NA  COM              174
Congo, Dem. Rep.           NA             NA        NA          NA          NA  COD              180
Congo, Rep.                NA             NA        NA          NA          NA  COG              178
Cote d'Ivoire              NA             NA        NA          NA          NA  CIV              384
Croatia                    NA             NA        NA          NA          NA  HRV              191
Cyprus                     NA             NA        NA          NA          NA  CYP              196
Czech Republic             NA             NA        NA          NA          NA  CZE              203
Denmark                    NA             NA        NA          NA          NA  DNK              208
Djibouti                   NA             NA        NA          NA          NA  DJI              262
Egypt                      NA             NA        NA          NA          NA  EGY              818
Equatorial Guinea          NA             NA        NA          NA          NA  GNQ              226
Eritrea                    NA             NA        NA          NA          NA  ERI              232
Estonia                    NA             NA        NA          NA          NA  EST              233
Ethiopia                   NA             NA        NA          NA          NA  ETH              231
Fiji                       NA             NA        NA          NA          NA  FJI              242
Finland                    NA             NA        NA          NA          NA  FIN              246
France                     NA             NA        NA          NA          NA  FRA              250
French Guiana              NA             NA        NA          NA          NA  GUF              254
French Polynesia           NA             NA        NA          NA          NA  PYF              258
Gabon                      NA             NA        NA          NA          NA  GAB              266
Gambia                     NA             NA        NA          NA          NA  GMB              270
Georgia                    NA             NA        NA          NA          NA  GEO              268
Germany                    NA             NA        NA          NA          NA  DEU              276
Ghana                      NA             NA        NA          NA          NA  GHA              288
Greece                     NA             NA        NA          NA          NA  GRC              300
Grenada                    NA             NA        NA          NA          NA  GRD              308
Guadeloupe                 NA             NA        NA          NA          NA  GLP              312
Guinea                     NA             NA        NA          NA          NA  GIN              324
Guinea-Bissau              NA             NA        NA          NA          NA  GNB              624
Guyana                     NA             NA        NA          NA          NA  GUY              328
Hong Kong, China           NA             NA        NA          NA          NA  HKG              344
Hungary                    NA             NA        NA          NA          NA  HUN              348
Iceland                    NA             NA        NA          NA          NA  ISL              352
India                      NA             NA        NA          NA          NA  IND              356
Indonesia                  NA             NA        NA          NA          NA  IDN              360
Iran                       NA             NA        NA          NA          NA  IRN              364
Iraq                       NA             NA        NA          NA          NA  IRQ              368
Ireland                    NA             NA        NA          NA          NA  IRL              372
Israel                     NA             NA        NA          NA          NA  ISR              376
Italy                      NA             NA        NA          NA          NA  ITA              380
Japan                      NA             NA        NA          NA          NA  JPN              392
Jordan                     NA             NA        NA          NA          NA  JOR              400
Kazakhstan                 NA             NA        NA          NA          NA  KAZ              398
Kenya                      NA             NA        NA          NA          NA  KEN              404
Korea, Dem. Rep.           NA             NA        NA          NA          NA  KOR              410
Korea, Rep.                NA             NA        NA          NA          NA  KOR              410
Kuwait                     NA             NA        NA          NA          NA  KWT              414
Latvia                     NA             NA        NA          NA          NA  LVA              428
Lebanon                    NA             NA        NA          NA          NA  LBN              422
Lesotho                    NA             NA        NA          NA          NA  LSO              426
Liberia                    NA             NA        NA          NA          NA  LBR              430
Libya                      NA             NA        NA          NA          NA  LBY              434
Lithuania                  NA             NA        NA          NA          NA  LTU              440
Luxembourg                 NA             NA        NA          NA          NA  LUX              442
Macao, China               NA             NA        NA          NA          NA  MAC              446
Madagascar                 NA             NA        NA          NA          NA  MDG              450
Malawi                     NA             NA        NA          NA          NA  MWI              454
Malaysia                   NA             NA        NA          NA          NA  MYS              458
Maldives                   NA             NA        NA          NA          NA  MDV              462
Mali                       NA             NA        NA          NA          NA  MLI              466
Malta                      NA             NA        NA          NA          NA  MLT              470
Martinique                 NA             NA        NA          NA          NA  MTQ              474
Mauritania                 NA             NA        NA          NA          NA  MRT              478
Mauritius                  NA             NA        NA          NA          NA  MUS              480
Micronesia, Fed. Sts.      NA             NA        NA          NA          NA  FSM              583
Moldova                    NA             NA        NA          NA          NA  MDA              498
Mongolia                   NA             NA        NA          NA          NA  MNG              496
Montenegro                 NA             NA        NA          NA          NA  MNE              499
Morocco                    NA             NA        NA          NA          NA  MAR              504
Mozambique                 NA             NA        NA          NA          NA  MOZ              508
Myanmar                    NA             NA        NA          NA          NA  MMR              104
Namibia                    NA             NA        NA          NA          NA  NAM              516
Nepal                      NA             NA        NA          NA          NA  NPL              524
Netherlands                NA             NA        NA          NA          NA  NLD              528
Netherlands Antilles       NA             NA        NA          NA          NA  ANT              530
New Caledonia              NA             NA        NA          NA          NA  NCL              540
New Zealand                NA             NA        NA          NA          NA  NZL              554
Niger                      NA             NA        NA          NA          NA  NER              562
Nigeria                    NA             NA        NA          NA          NA  NGA              566
Norway                     NA             NA        NA          NA          NA  NOR              578
Oman                       NA             NA        NA          NA          NA  OMN              512
Pakistan                   NA             NA        NA          NA          NA  PAK              586
Papua New Guinea           NA             NA        NA          NA          NA  PNG              598
Philippines                NA             NA        NA          NA          NA  PHL              608
Poland                     NA             NA        NA          NA          NA  POL              616
Portugal                   NA             NA        NA          NA          NA  PRT              620
Qatar                      NA             NA        NA          NA          NA  QAT              634
Reunion                    NA             NA        NA          NA          NA  REU              638
Romania                    NA             NA        NA          NA          NA  ROU              642
Russia                     NA             NA        NA          NA          NA  RUS              643
Rwanda                     NA             NA        NA          NA          NA  RWA              646
Samoa                      NA             NA        NA          NA          NA  WSM              882
Sao Tome and Principe      NA             NA        NA          NA          NA  STP              678
Saudi Arabia               NA             NA        NA          NA          NA  SAU              682
Senegal                    NA             NA        NA          NA          NA  SEN              686
Serbia                     NA             NA        NA          NA          NA  SRB              688
Sierra Leone               NA             NA        NA          NA          NA  SLE              694
Singapore                  NA             NA        NA          NA          NA  SGP              702
Slovak Republic            NA             NA        NA          NA          NA  SVK              703
Slovenia                   NA             NA        NA          NA          NA  SVN              705
Solomon Islands            NA             NA        NA          NA          NA  SLB               90
Somalia                    NA             NA        NA          NA          NA  SOM              706
South Africa               NA             NA        NA          NA          NA  ZAF              710
Spain                      NA             NA        NA          NA          NA  ESP              724
Sri Lanka                  NA             NA        NA          NA          NA  LKA              144
Sudan                      NA             NA        NA          NA          NA  SDN              736
Suriname                   NA             NA        NA          NA          NA  SUR              740
Swaziland                  NA             NA        NA          NA          NA  SWZ              748
Sweden                     NA             NA        NA          NA          NA  SWE              752
Switzerland                NA             NA        NA          NA          NA  CHE              756
Syria                      NA             NA        NA          NA          NA  SYR              760
Taiwan                     NA             NA        NA          NA          NA  TWN              158
Tajikistan                 NA             NA        NA          NA          NA  TJK              762
Tanzania                   NA             NA        NA          NA          NA  TZA              834
Thailand                   NA             NA        NA          NA          NA  THA              764
Timor-Leste                NA             NA        NA          NA          NA  TLS              626
Togo                       NA             NA        NA          NA          NA  TGO              768
Tonga                      NA             NA        NA          NA          NA  TON              776
Tunisia                    NA             NA        NA          NA          NA  TUN              788
Turkey                     NA             NA        NA          NA          NA  TUR              792
Turkmenistan               NA             NA        NA          NA          NA  TKM              795
Uganda                     NA             NA        NA          NA          NA  UGA              800
Ukraine                    NA             NA        NA          NA          NA  UKR              804
United Arab Emirates       NA             NA        NA          NA          NA  ARE              784
United Kingdom             NA             NA        NA          NA          NA  GBR              826
Uzbekistan                 NA             NA        NA          NA          NA  UZB              860
Vanuatu                    NA             NA        NA          NA          NA  VUT              548
Vietnam                    NA             NA        NA          NA          NA  VNM              704
West Bank and Gaza         NA             NA        NA          NA          NA  PSE              275
Yemen, Rep.                NA             NA        NA          NA          NA  YEM              887
Zambia                     NA             NA        NA          NA          NA  ZMB              894
Zimbabwe                   NA             NA        NA          NA          NA  ZWE              716


```r
full_join(x=country_codes, y=gapminder_Americas)  %>% 
  knitr::kable()
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining character vector and factor, coercing
## into character vector
```



country                    iso_alpha    iso_num  continent    year   lifeExp         pop   gdpPercap
-------------------------  ----------  --------  ----------  -----  --------  ----------  ----------
Afghanistan                AFG                4  NA             NA        NA          NA          NA
Albania                    ALB                8  NA             NA        NA          NA          NA
Algeria                    DZA               12  NA             NA        NA          NA          NA
Angola                     AGO               24  NA             NA        NA          NA          NA
Argentina                  ARG               32  Americas     1952    62.485    17876956    5911.315
Armenia                    ARM               51  NA             NA        NA          NA          NA
Aruba                      ABW              533  NA             NA        NA          NA          NA
Australia                  AUS               36  NA             NA        NA          NA          NA
Austria                    AUT               40  NA             NA        NA          NA          NA
Azerbaijan                 AZE               31  NA             NA        NA          NA          NA
Bahamas                    BHS               44  NA             NA        NA          NA          NA
Bahrain                    BHR               48  NA             NA        NA          NA          NA
Bangladesh                 BGD               50  NA             NA        NA          NA          NA
Barbados                   BRB               52  NA             NA        NA          NA          NA
Belarus                    BLR              112  NA             NA        NA          NA          NA
Belgium                    BEL               56  NA             NA        NA          NA          NA
Belize                     BLZ               84  NA             NA        NA          NA          NA
Benin                      BEN              204  NA             NA        NA          NA          NA
Bhutan                     BTN               64  NA             NA        NA          NA          NA
Bolivia                    BOL               68  Americas     1952    40.414     2883315    2677.326
Bosnia and Herzegovina     BIH               70  NA             NA        NA          NA          NA
Botswana                   BWA               72  NA             NA        NA          NA          NA
Brazil                     BRA               76  Americas     1952    50.917    56602560    2108.944
Brunei                     BRN               96  NA             NA        NA          NA          NA
Bulgaria                   BGR              100  NA             NA        NA          NA          NA
Burkina Faso               BFA              854  NA             NA        NA          NA          NA
Burundi                    BDI              108  NA             NA        NA          NA          NA
Cambodia                   KHM              116  NA             NA        NA          NA          NA
Cameroon                   CMR              120  NA             NA        NA          NA          NA
Canada                     CAN              124  Americas     1952    68.750    14785584   11367.161
Cape Verde                 CPV              132  NA             NA        NA          NA          NA
Central African Republic   CAF              140  NA             NA        NA          NA          NA
Chad                       TCD              148  NA             NA        NA          NA          NA
Chile                      CHL              152  Americas     1952    54.745     6377619    3939.979
China                      CHN              156  NA             NA        NA          NA          NA
Colombia                   COL              170  Americas     1952    50.643    12350771    2144.115
Comoros                    COM              174  NA             NA        NA          NA          NA
Congo, Dem. Rep.           COD              180  NA             NA        NA          NA          NA
Congo, Rep.                COG              178  NA             NA        NA          NA          NA
Costa Rica                 CRI              188  Americas     1952    57.206      926317    2627.009
Cote d'Ivoire              CIV              384  NA             NA        NA          NA          NA
Croatia                    HRV              191  NA             NA        NA          NA          NA
Cuba                       CUB              192  Americas     1952    59.421     6007797    5586.539
Cyprus                     CYP              196  NA             NA        NA          NA          NA
Czech Republic             CZE              203  NA             NA        NA          NA          NA
Denmark                    DNK              208  NA             NA        NA          NA          NA
Djibouti                   DJI              262  NA             NA        NA          NA          NA
Dominican Republic         DOM              214  Americas     1952    45.928     2491346    1397.717
Ecuador                    ECU              218  Americas     1952    48.357     3548753    3522.111
Egypt                      EGY              818  NA             NA        NA          NA          NA
El Salvador                SLV              222  Americas     1952    45.262     2042865    3048.303
Equatorial Guinea          GNQ              226  NA             NA        NA          NA          NA
Eritrea                    ERI              232  NA             NA        NA          NA          NA
Estonia                    EST              233  NA             NA        NA          NA          NA
Ethiopia                   ETH              231  NA             NA        NA          NA          NA
Fiji                       FJI              242  NA             NA        NA          NA          NA
Finland                    FIN              246  NA             NA        NA          NA          NA
France                     FRA              250  NA             NA        NA          NA          NA
French Guiana              GUF              254  NA             NA        NA          NA          NA
French Polynesia           PYF              258  NA             NA        NA          NA          NA
Gabon                      GAB              266  NA             NA        NA          NA          NA
Gambia                     GMB              270  NA             NA        NA          NA          NA
Georgia                    GEO              268  NA             NA        NA          NA          NA
Germany                    DEU              276  NA             NA        NA          NA          NA
Ghana                      GHA              288  NA             NA        NA          NA          NA
Greece                     GRC              300  NA             NA        NA          NA          NA
Grenada                    GRD              308  NA             NA        NA          NA          NA
Guadeloupe                 GLP              312  NA             NA        NA          NA          NA
Guatemala                  GTM              320  Americas     1952    42.023     3146381    2428.238
Guinea                     GIN              324  NA             NA        NA          NA          NA
Guinea-Bissau              GNB              624  NA             NA        NA          NA          NA
Guyana                     GUY              328  NA             NA        NA          NA          NA
Haiti                      HTI              332  Americas     1952    37.579     3201488    1840.367
Honduras                   HND              340  Americas     1952    41.912     1517453    2194.926
Hong Kong, China           HKG              344  NA             NA        NA          NA          NA
Hungary                    HUN              348  NA             NA        NA          NA          NA
Iceland                    ISL              352  NA             NA        NA          NA          NA
India                      IND              356  NA             NA        NA          NA          NA
Indonesia                  IDN              360  NA             NA        NA          NA          NA
Iran                       IRN              364  NA             NA        NA          NA          NA
Iraq                       IRQ              368  NA             NA        NA          NA          NA
Ireland                    IRL              372  NA             NA        NA          NA          NA
Israel                     ISR              376  NA             NA        NA          NA          NA
Italy                      ITA              380  NA             NA        NA          NA          NA
Jamaica                    JAM              388  Americas     1952    58.530     1426095    2898.531
Japan                      JPN              392  NA             NA        NA          NA          NA
Jordan                     JOR              400  NA             NA        NA          NA          NA
Kazakhstan                 KAZ              398  NA             NA        NA          NA          NA
Kenya                      KEN              404  NA             NA        NA          NA          NA
Korea, Dem. Rep.           KOR              410  NA             NA        NA          NA          NA
Korea, Rep.                KOR              410  NA             NA        NA          NA          NA
Kuwait                     KWT              414  NA             NA        NA          NA          NA
Latvia                     LVA              428  NA             NA        NA          NA          NA
Lebanon                    LBN              422  NA             NA        NA          NA          NA
Lesotho                    LSO              426  NA             NA        NA          NA          NA
Liberia                    LBR              430  NA             NA        NA          NA          NA
Libya                      LBY              434  NA             NA        NA          NA          NA
Lithuania                  LTU              440  NA             NA        NA          NA          NA
Luxembourg                 LUX              442  NA             NA        NA          NA          NA
Macao, China               MAC              446  NA             NA        NA          NA          NA
Madagascar                 MDG              450  NA             NA        NA          NA          NA
Malawi                     MWI              454  NA             NA        NA          NA          NA
Malaysia                   MYS              458  NA             NA        NA          NA          NA
Maldives                   MDV              462  NA             NA        NA          NA          NA
Mali                       MLI              466  NA             NA        NA          NA          NA
Malta                      MLT              470  NA             NA        NA          NA          NA
Martinique                 MTQ              474  NA             NA        NA          NA          NA
Mauritania                 MRT              478  NA             NA        NA          NA          NA
Mauritius                  MUS              480  NA             NA        NA          NA          NA
Mexico                     MEX              484  Americas     1952    50.789    30144317    3478.126
Micronesia, Fed. Sts.      FSM              583  NA             NA        NA          NA          NA
Moldova                    MDA              498  NA             NA        NA          NA          NA
Mongolia                   MNG              496  NA             NA        NA          NA          NA
Montenegro                 MNE              499  NA             NA        NA          NA          NA
Morocco                    MAR              504  NA             NA        NA          NA          NA
Mozambique                 MOZ              508  NA             NA        NA          NA          NA
Myanmar                    MMR              104  NA             NA        NA          NA          NA
Namibia                    NAM              516  NA             NA        NA          NA          NA
Nepal                      NPL              524  NA             NA        NA          NA          NA
Netherlands                NLD              528  NA             NA        NA          NA          NA
Netherlands Antilles       ANT              530  NA             NA        NA          NA          NA
New Caledonia              NCL              540  NA             NA        NA          NA          NA
New Zealand                NZL              554  NA             NA        NA          NA          NA
Nicaragua                  NIC              558  Americas     1952    42.314     1165790    3112.364
Niger                      NER              562  NA             NA        NA          NA          NA
Nigeria                    NGA              566  NA             NA        NA          NA          NA
Norway                     NOR              578  NA             NA        NA          NA          NA
Oman                       OMN              512  NA             NA        NA          NA          NA
Pakistan                   PAK              586  NA             NA        NA          NA          NA
Panama                     PAN              591  Americas     1952    55.191      940080    2480.380
Papua New Guinea           PNG              598  NA             NA        NA          NA          NA
Paraguay                   PRY              600  Americas     1952    62.649     1555876    1952.309
Peru                       PER              604  Americas     1952    43.902     8025700    3758.523
Philippines                PHL              608  NA             NA        NA          NA          NA
Poland                     POL              616  NA             NA        NA          NA          NA
Portugal                   PRT              620  NA             NA        NA          NA          NA
Puerto Rico                PRI              630  Americas     1952    64.280     2227000    3081.960
Qatar                      QAT              634  NA             NA        NA          NA          NA
Reunion                    REU              638  NA             NA        NA          NA          NA
Romania                    ROU              642  NA             NA        NA          NA          NA
Russia                     RUS              643  NA             NA        NA          NA          NA
Rwanda                     RWA              646  NA             NA        NA          NA          NA
Samoa                      WSM              882  NA             NA        NA          NA          NA
Sao Tome and Principe      STP              678  NA             NA        NA          NA          NA
Saudi Arabia               SAU              682  NA             NA        NA          NA          NA
Senegal                    SEN              686  NA             NA        NA          NA          NA
Serbia                     SRB              688  NA             NA        NA          NA          NA
Sierra Leone               SLE              694  NA             NA        NA          NA          NA
Singapore                  SGP              702  NA             NA        NA          NA          NA
Slovak Republic            SVK              703  NA             NA        NA          NA          NA
Slovenia                   SVN              705  NA             NA        NA          NA          NA
Solomon Islands            SLB               90  NA             NA        NA          NA          NA
Somalia                    SOM              706  NA             NA        NA          NA          NA
South Africa               ZAF              710  NA             NA        NA          NA          NA
Spain                      ESP              724  NA             NA        NA          NA          NA
Sri Lanka                  LKA              144  NA             NA        NA          NA          NA
Sudan                      SDN              736  NA             NA        NA          NA          NA
Suriname                   SUR              740  NA             NA        NA          NA          NA
Swaziland                  SWZ              748  NA             NA        NA          NA          NA
Sweden                     SWE              752  NA             NA        NA          NA          NA
Switzerland                CHE              756  NA             NA        NA          NA          NA
Syria                      SYR              760  NA             NA        NA          NA          NA
Taiwan                     TWN              158  NA             NA        NA          NA          NA
Tajikistan                 TJK              762  NA             NA        NA          NA          NA
Tanzania                   TZA              834  NA             NA        NA          NA          NA
Thailand                   THA              764  NA             NA        NA          NA          NA
Timor-Leste                TLS              626  NA             NA        NA          NA          NA
Togo                       TGO              768  NA             NA        NA          NA          NA
Tonga                      TON              776  NA             NA        NA          NA          NA
Trinidad and Tobago        TTO              780  Americas     1952    59.100      662850    3023.272
Tunisia                    TUN              788  NA             NA        NA          NA          NA
Turkey                     TUR              792  NA             NA        NA          NA          NA
Turkmenistan               TKM              795  NA             NA        NA          NA          NA
Uganda                     UGA              800  NA             NA        NA          NA          NA
Ukraine                    UKR              804  NA             NA        NA          NA          NA
United Arab Emirates       ARE              784  NA             NA        NA          NA          NA
United Kingdom             GBR              826  NA             NA        NA          NA          NA
United States              USA              840  Americas     1952    68.440   157553000   13990.482
Uruguay                    URY              858  Americas     1952    66.071     2252965    5716.767
Uzbekistan                 UZB              860  NA             NA        NA          NA          NA
Vanuatu                    VUT              548  NA             NA        NA          NA          NA
Venezuela                  VEN              862  Americas     1952    55.088     5439568    7689.800
Vietnam                    VNM              704  NA             NA        NA          NA          NA
West Bank and Gaza         PSE              275  NA             NA        NA          NA          NA
Yemen, Rep.                YEM              887  NA             NA        NA          NA          NA
Zambia                     ZMB              894  NA             NA        NA          NA          NA
Zimbabwe                   ZWE              716  NA             NA        NA          NA          NA

It is expected that the above two tables generated by `full_join()` have the same results, since this function shows all rows and columns from both `x` and `y`. Due to the data frames we choose (countries in `gapminder_Americas` is actually a subset of `country_codes`), the resultant tables are with the identical data as running `left_join(x=country_codes, y=gapminder_Americas)`.

## Activity #3

### `merge()`

In the following two examples, we change the order of `x` and `y`.


```r
merge(x=gapminder_Americas, y=country_codes) %>% 
  knitr::kable()
```



country               continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
--------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Argentina             Americas     1952    62.485    17876956    5911.315  ARG               32
Bolivia               Americas     1952    40.414     2883315    2677.326  BOL               68
Brazil                Americas     1952    50.917    56602560    2108.944  BRA               76
Canada                Americas     1952    68.750    14785584   11367.161  CAN              124
Chile                 Americas     1952    54.745     6377619    3939.979  CHL              152
Colombia              Americas     1952    50.643    12350771    2144.115  COL              170
Costa Rica            Americas     1952    57.206      926317    2627.009  CRI              188
Cuba                  Americas     1952    59.421     6007797    5586.539  CUB              192
Dominican Republic    Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador               Americas     1952    48.357     3548753    3522.111  ECU              218
El Salvador           Americas     1952    45.262     2042865    3048.303  SLV              222
Guatemala             Americas     1952    42.023     3146381    2428.238  GTM              320
Haiti                 Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras              Americas     1952    41.912     1517453    2194.926  HND              340
Jamaica               Americas     1952    58.530     1426095    2898.531  JAM              388
Mexico                Americas     1952    50.789    30144317    3478.126  MEX              484
Nicaragua             Americas     1952    42.314     1165790    3112.364  NIC              558
Panama                Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay              Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                  Americas     1952    43.902     8025700    3758.523  PER              604
Puerto Rico           Americas     1952    64.280     2227000    3081.960  PRI              630
Trinidad and Tobago   Americas     1952    59.100      662850    3023.272  TTO              780
United States         Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay               Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela             Americas     1952    55.088     5439568    7689.800  VEN              862


```r
merge(x=country_codes, y=gapminder_Americas) %>% 
  knitr::kable()
```



country               iso_alpha    iso_num  continent    year   lifeExp         pop   gdpPercap
--------------------  ----------  --------  ----------  -----  --------  ----------  ----------
Argentina             ARG               32  Americas     1952    62.485    17876956    5911.315
Bolivia               BOL               68  Americas     1952    40.414     2883315    2677.326
Brazil                BRA               76  Americas     1952    50.917    56602560    2108.944
Canada                CAN              124  Americas     1952    68.750    14785584   11367.161
Chile                 CHL              152  Americas     1952    54.745     6377619    3939.979
Colombia              COL              170  Americas     1952    50.643    12350771    2144.115
Costa Rica            CRI              188  Americas     1952    57.206      926317    2627.009
Cuba                  CUB              192  Americas     1952    59.421     6007797    5586.539
Dominican Republic    DOM              214  Americas     1952    45.928     2491346    1397.717
Ecuador               ECU              218  Americas     1952    48.357     3548753    3522.111
El Salvador           SLV              222  Americas     1952    45.262     2042865    3048.303
Guatemala             GTM              320  Americas     1952    42.023     3146381    2428.238
Haiti                 HTI              332  Americas     1952    37.579     3201488    1840.367
Honduras              HND              340  Americas     1952    41.912     1517453    2194.926
Jamaica               JAM              388  Americas     1952    58.530     1426095    2898.531
Mexico                MEX              484  Americas     1952    50.789    30144317    3478.126
Nicaragua             NIC              558  Americas     1952    42.314     1165790    3112.364
Panama                PAN              591  Americas     1952    55.191      940080    2480.380
Paraguay              PRY              600  Americas     1952    62.649     1555876    1952.309
Peru                  PER              604  Americas     1952    43.902     8025700    3758.523
Puerto Rico           PRI              630  Americas     1952    64.280     2227000    3081.960
Trinidad and Tobago   TTO              780  Americas     1952    59.100      662850    3023.272
United States         USA              840  Americas     1952    68.440   157553000   13990.482
Uruguay               URY              858  Americas     1952    66.071     2252965    5716.767
Venezuela             VEN              862  Americas     1952    55.088     5439568    7689.800

From the results, by default, we can conclude that `merge()` is the same as `inner_join()`.

Actually it is also possible to use `merge()` to implement `full_join()` and `left_join()`.

#### Implement `full_join()` using `merge()`


```r
merge(x=gapminder_Americas, y=country_codes, all=TRUE) %>% 
  knitr::kable()
```



country                    continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
-------------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Afghanistan                NA             NA        NA          NA          NA  AFG                4
Albania                    NA             NA        NA          NA          NA  ALB                8
Algeria                    NA             NA        NA          NA          NA  DZA               12
Angola                     NA             NA        NA          NA          NA  AGO               24
Argentina                  Americas     1952    62.485    17876956    5911.315  ARG               32
Australia                  NA             NA        NA          NA          NA  AUS               36
Austria                    NA             NA        NA          NA          NA  AUT               40
Bahrain                    NA             NA        NA          NA          NA  BHR               48
Bangladesh                 NA             NA        NA          NA          NA  BGD               50
Belgium                    NA             NA        NA          NA          NA  BEL               56
Benin                      NA             NA        NA          NA          NA  BEN              204
Bolivia                    Americas     1952    40.414     2883315    2677.326  BOL               68
Bosnia and Herzegovina     NA             NA        NA          NA          NA  BIH               70
Botswana                   NA             NA        NA          NA          NA  BWA               72
Brazil                     Americas     1952    50.917    56602560    2108.944  BRA               76
Bulgaria                   NA             NA        NA          NA          NA  BGR              100
Burkina Faso               NA             NA        NA          NA          NA  BFA              854
Burundi                    NA             NA        NA          NA          NA  BDI              108
Cambodia                   NA             NA        NA          NA          NA  KHM              116
Cameroon                   NA             NA        NA          NA          NA  CMR              120
Canada                     Americas     1952    68.750    14785584   11367.161  CAN              124
Central African Republic   NA             NA        NA          NA          NA  CAF              140
Chad                       NA             NA        NA          NA          NA  TCD              148
Chile                      Americas     1952    54.745     6377619    3939.979  CHL              152
China                      NA             NA        NA          NA          NA  CHN              156
Colombia                   Americas     1952    50.643    12350771    2144.115  COL              170
Comoros                    NA             NA        NA          NA          NA  COM              174
Congo, Dem. Rep.           NA             NA        NA          NA          NA  COD              180
Congo, Rep.                NA             NA        NA          NA          NA  COG              178
Costa Rica                 Americas     1952    57.206      926317    2627.009  CRI              188
Cote d'Ivoire              NA             NA        NA          NA          NA  CIV              384
Croatia                    NA             NA        NA          NA          NA  HRV              191
Cuba                       Americas     1952    59.421     6007797    5586.539  CUB              192
Czech Republic             NA             NA        NA          NA          NA  CZE              203
Denmark                    NA             NA        NA          NA          NA  DNK              208
Djibouti                   NA             NA        NA          NA          NA  DJI              262
Dominican Republic         Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador                    Americas     1952    48.357     3548753    3522.111  ECU              218
Egypt                      NA             NA        NA          NA          NA  EGY              818
El Salvador                Americas     1952    45.262     2042865    3048.303  SLV              222
Equatorial Guinea          NA             NA        NA          NA          NA  GNQ              226
Eritrea                    NA             NA        NA          NA          NA  ERI              232
Ethiopia                   NA             NA        NA          NA          NA  ETH              231
Finland                    NA             NA        NA          NA          NA  FIN              246
France                     NA             NA        NA          NA          NA  FRA              250
Gabon                      NA             NA        NA          NA          NA  GAB              266
Gambia                     NA             NA        NA          NA          NA  GMB              270
Germany                    NA             NA        NA          NA          NA  DEU              276
Ghana                      NA             NA        NA          NA          NA  GHA              288
Greece                     NA             NA        NA          NA          NA  GRC              300
Guatemala                  Americas     1952    42.023     3146381    2428.238  GTM              320
Guinea                     NA             NA        NA          NA          NA  GIN              324
Guinea-Bissau              NA             NA        NA          NA          NA  GNB              624
Haiti                      Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras                   Americas     1952    41.912     1517453    2194.926  HND              340
Hong Kong, China           NA             NA        NA          NA          NA  HKG              344
Hungary                    NA             NA        NA          NA          NA  HUN              348
Iceland                    NA             NA        NA          NA          NA  ISL              352
India                      NA             NA        NA          NA          NA  IND              356
Indonesia                  NA             NA        NA          NA          NA  IDN              360
Iran                       NA             NA        NA          NA          NA  IRN              364
Iraq                       NA             NA        NA          NA          NA  IRQ              368
Ireland                    NA             NA        NA          NA          NA  IRL              372
Israel                     NA             NA        NA          NA          NA  ISR              376
Italy                      NA             NA        NA          NA          NA  ITA              380
Jamaica                    Americas     1952    58.530     1426095    2898.531  JAM              388
Japan                      NA             NA        NA          NA          NA  JPN              392
Jordan                     NA             NA        NA          NA          NA  JOR              400
Kenya                      NA             NA        NA          NA          NA  KEN              404
Korea, Dem. Rep.           NA             NA        NA          NA          NA  KOR              410
Korea, Rep.                NA             NA        NA          NA          NA  KOR              410
Kuwait                     NA             NA        NA          NA          NA  KWT              414
Lebanon                    NA             NA        NA          NA          NA  LBN              422
Lesotho                    NA             NA        NA          NA          NA  LSO              426
Liberia                    NA             NA        NA          NA          NA  LBR              430
Libya                      NA             NA        NA          NA          NA  LBY              434
Madagascar                 NA             NA        NA          NA          NA  MDG              450
Malawi                     NA             NA        NA          NA          NA  MWI              454
Malaysia                   NA             NA        NA          NA          NA  MYS              458
Mali                       NA             NA        NA          NA          NA  MLI              466
Mauritania                 NA             NA        NA          NA          NA  MRT              478
Mauritius                  NA             NA        NA          NA          NA  MUS              480
Mexico                     Americas     1952    50.789    30144317    3478.126  MEX              484
Mongolia                   NA             NA        NA          NA          NA  MNG              496
Montenegro                 NA             NA        NA          NA          NA  MNE              499
Morocco                    NA             NA        NA          NA          NA  MAR              504
Mozambique                 NA             NA        NA          NA          NA  MOZ              508
Myanmar                    NA             NA        NA          NA          NA  MMR              104
Namibia                    NA             NA        NA          NA          NA  NAM              516
Nepal                      NA             NA        NA          NA          NA  NPL              524
Netherlands                NA             NA        NA          NA          NA  NLD              528
New Zealand                NA             NA        NA          NA          NA  NZL              554
Nicaragua                  Americas     1952    42.314     1165790    3112.364  NIC              558
Niger                      NA             NA        NA          NA          NA  NER              562
Nigeria                    NA             NA        NA          NA          NA  NGA              566
Norway                     NA             NA        NA          NA          NA  NOR              578
Oman                       NA             NA        NA          NA          NA  OMN              512
Pakistan                   NA             NA        NA          NA          NA  PAK              586
Panama                     Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay                   Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                       Americas     1952    43.902     8025700    3758.523  PER              604
Philippines                NA             NA        NA          NA          NA  PHL              608
Poland                     NA             NA        NA          NA          NA  POL              616
Portugal                   NA             NA        NA          NA          NA  PRT              620
Puerto Rico                Americas     1952    64.280     2227000    3081.960  PRI              630
Reunion                    NA             NA        NA          NA          NA  REU              638
Romania                    NA             NA        NA          NA          NA  ROU              642
Rwanda                     NA             NA        NA          NA          NA  RWA              646
Sao Tome and Principe      NA             NA        NA          NA          NA  STP              678
Saudi Arabia               NA             NA        NA          NA          NA  SAU              682
Senegal                    NA             NA        NA          NA          NA  SEN              686
Serbia                     NA             NA        NA          NA          NA  SRB              688
Sierra Leone               NA             NA        NA          NA          NA  SLE              694
Singapore                  NA             NA        NA          NA          NA  SGP              702
Slovak Republic            NA             NA        NA          NA          NA  SVK              703
Slovenia                   NA             NA        NA          NA          NA  SVN              705
Somalia                    NA             NA        NA          NA          NA  SOM              706
South Africa               NA             NA        NA          NA          NA  ZAF              710
Spain                      NA             NA        NA          NA          NA  ESP              724
Sri Lanka                  NA             NA        NA          NA          NA  LKA              144
Sudan                      NA             NA        NA          NA          NA  SDN              736
Swaziland                  NA             NA        NA          NA          NA  SWZ              748
Sweden                     NA             NA        NA          NA          NA  SWE              752
Switzerland                NA             NA        NA          NA          NA  CHE              756
Syria                      NA             NA        NA          NA          NA  SYR              760
Taiwan                     NA             NA        NA          NA          NA  TWN              158
Tanzania                   NA             NA        NA          NA          NA  TZA              834
Thailand                   NA             NA        NA          NA          NA  THA              764
Togo                       NA             NA        NA          NA          NA  TGO              768
Trinidad and Tobago        Americas     1952    59.100      662850    3023.272  TTO              780
Tunisia                    NA             NA        NA          NA          NA  TUN              788
Turkey                     NA             NA        NA          NA          NA  TUR              792
Uganda                     NA             NA        NA          NA          NA  UGA              800
United Kingdom             NA             NA        NA          NA          NA  GBR              826
United States              Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay                    Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela                  Americas     1952    55.088     5439568    7689.800  VEN              862
Vietnam                    NA             NA        NA          NA          NA  VNM              704
West Bank and Gaza         NA             NA        NA          NA          NA  PSE              275
Yemen, Rep.                NA             NA        NA          NA          NA  YEM              887
Zambia                     NA             NA        NA          NA          NA  ZMB              894
Zimbabwe                   NA             NA        NA          NA          NA  ZWE              716
Armenia                    NA             NA        NA          NA          NA  ARM               51
Aruba                      NA             NA        NA          NA          NA  ABW              533
Azerbaijan                 NA             NA        NA          NA          NA  AZE               31
Bahamas                    NA             NA        NA          NA          NA  BHS               44
Barbados                   NA             NA        NA          NA          NA  BRB               52
Belarus                    NA             NA        NA          NA          NA  BLR              112
Belize                     NA             NA        NA          NA          NA  BLZ               84
Bhutan                     NA             NA        NA          NA          NA  BTN               64
French Polynesia           NA             NA        NA          NA          NA  PYF              258
Georgia                    NA             NA        NA          NA          NA  GEO              268
Brunei                     NA             NA        NA          NA          NA  BRN               96
Cape Verde                 NA             NA        NA          NA          NA  CPV              132
Cyprus                     NA             NA        NA          NA          NA  CYP              196
Kazakhstan                 NA             NA        NA          NA          NA  KAZ              398
Estonia                    NA             NA        NA          NA          NA  EST              233
Fiji                       NA             NA        NA          NA          NA  FJI              242
French Guiana              NA             NA        NA          NA          NA  GUF              254
Macao, China               NA             NA        NA          NA          NA  MAC              446
Grenada                    NA             NA        NA          NA          NA  GRD              308
Guadeloupe                 NA             NA        NA          NA          NA  GLP              312
Guyana                     NA             NA        NA          NA          NA  GUY              328
Papua New Guinea           NA             NA        NA          NA          NA  PNG              598
Latvia                     NA             NA        NA          NA          NA  LVA              428
Lithuania                  NA             NA        NA          NA          NA  LTU              440
Luxembourg                 NA             NA        NA          NA          NA  LUX              442
Samoa                      NA             NA        NA          NA          NA  WSM              882
Maldives                   NA             NA        NA          NA          NA  MDV              462
Malta                      NA             NA        NA          NA          NA  MLT              470
Martinique                 NA             NA        NA          NA          NA  MTQ              474
Micronesia, Fed. Sts.      NA             NA        NA          NA          NA  FSM              583
Moldova                    NA             NA        NA          NA          NA  MDA              498
Netherlands Antilles       NA             NA        NA          NA          NA  ANT              530
New Caledonia              NA             NA        NA          NA          NA  NCL              540
Tajikistan                 NA             NA        NA          NA          NA  TJK              762
Qatar                      NA             NA        NA          NA          NA  QAT              634
Uzbekistan                 NA             NA        NA          NA          NA  UZB              860
Tonga                      NA             NA        NA          NA          NA  TON              776
Turkmenistan               NA             NA        NA          NA          NA  TKM              795
Russia                     NA             NA        NA          NA          NA  RUS              643
Ukraine                    NA             NA        NA          NA          NA  UKR              804
United Arab Emirates       NA             NA        NA          NA          NA  ARE              784
Solomon Islands            NA             NA        NA          NA          NA  SLB               90
Timor-Leste                NA             NA        NA          NA          NA  TLS              626
Suriname                   NA             NA        NA          NA          NA  SUR              740
Vanuatu                    NA             NA        NA          NA          NA  VUT              548

#### Implement `left_join()` using `merge()`

Notice that the order of `x` and `y` is important in this example.


```r
merge(x=gapminder_Americas, y=country_codes, all.x=TRUE) %>% 
  knitr::kable()
```



country               continent    year   lifeExp         pop   gdpPercap  iso_alpha    iso_num
--------------------  ----------  -----  --------  ----------  ----------  ----------  --------
Argentina             Americas     1952    62.485    17876956    5911.315  ARG               32
Bolivia               Americas     1952    40.414     2883315    2677.326  BOL               68
Brazil                Americas     1952    50.917    56602560    2108.944  BRA               76
Canada                Americas     1952    68.750    14785584   11367.161  CAN              124
Chile                 Americas     1952    54.745     6377619    3939.979  CHL              152
Colombia              Americas     1952    50.643    12350771    2144.115  COL              170
Costa Rica            Americas     1952    57.206      926317    2627.009  CRI              188
Cuba                  Americas     1952    59.421     6007797    5586.539  CUB              192
Dominican Republic    Americas     1952    45.928     2491346    1397.717  DOM              214
Ecuador               Americas     1952    48.357     3548753    3522.111  ECU              218
El Salvador           Americas     1952    45.262     2042865    3048.303  SLV              222
Guatemala             Americas     1952    42.023     3146381    2428.238  GTM              320
Haiti                 Americas     1952    37.579     3201488    1840.367  HTI              332
Honduras              Americas     1952    41.912     1517453    2194.926  HND              340
Jamaica               Americas     1952    58.530     1426095    2898.531  JAM              388
Mexico                Americas     1952    50.789    30144317    3478.126  MEX              484
Nicaragua             Americas     1952    42.314     1165790    3112.364  NIC              558
Panama                Americas     1952    55.191      940080    2480.380  PAN              591
Paraguay              Americas     1952    62.649     1555876    1952.309  PRY              600
Peru                  Americas     1952    43.902     8025700    3758.523  PER              604
Puerto Rico           Americas     1952    64.280     2227000    3081.960  PRI              630
Trinidad and Tobago   Americas     1952    59.100      662850    3023.272  TTO              780
United States         Americas     1952    68.440   157553000   13990.482  USA              840
Uruguay               Americas     1952    66.071     2252965    5716.767  URY              858
Venezuela             Americas     1952    55.088     5439568    7689.800  VEN              862

### `match()`


```r
match(gapminder_Americas$country, country_codes$country) %>% 
  knitr::kable()
```



|   x|
|---:|
|   5|
|  20|
|  23|
|  30|
|  34|
|  36|
|  40|
|  43|
|  48|
|  49|
|  51|
|  69|
|  73|
|  74|
|  85|
| 110|
| 124|
| 130|
| 132|
| 133|
| 137|
| 170|
| 178|
| 179|
| 182|

For the example we can know, there are some disadvantages using `match()` compared to `merge()` or join functions:

- It only works for two vectors.
- It only returns indeces of matching items.

# References
- [Data manipulation with tidyr](https://www.r-bloggers.com/data-manipulation-with-tidyr/)
- [Cheatsheet for dplyr join functions](http://stat545.com/bit001_dplyr-cheatsheet.html)
